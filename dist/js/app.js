!function e(t,i,l){function o(r,s){if(!i[r]){if(!t[r]){var u="function"==typeof require&&require;if(!s&&u)return u(r,!0);if(n)return n(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var a=i[r]={exports:{}};t[r][0].call(a.exports,function(e){var i=t[r][1][e];return o(i?i:e)},a,a.exports,e,t,i,l)}return i[r].exports}for(var n="function"==typeof require&&require,r=0;r<l.length;r++)o(l[r]);return o}({1:[function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}var o=e("./views/app"),n=l(o),r=e("./routers/router");l(r);$(function(){new n["default"]})},{"./routers/router":6,"./views/app":7}],2:[function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var o=e("./../models/todo"),n=l(o),r=Backbone.Collection.extend({model:n["default"],localStorage:new Backbone.LocalStorage("todos-backbone"),completed:function(){return this.filter(function(e){return e.get("completed")})},remaining:function(){return this.without.apply(this,this.completed())},nextOrder:function(){return this.length?this.last().get("order")+1:1},comparator:function(e){return e.get("order")}}),s=new r;i["default"]=s},{"./../models/todo":5}],3:[function(e,t,i){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var l=t[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,i,l){return i&&e(t.prototype,i),l&&e(t,l),t}}(),n=function(){function e(){l(this,e),this.filter=""}return o(e,[{key:"set",value:function(e){this.filter=e}},{key:"get",value:function(){return this.filter}}]),e}(),r=new n;i["default"]=r},{}],4:[function(e,t,i){"use strict";function l(e){return e===o}Object.defineProperty(i,"__esModule",{value:!0}),i.isEnterKey=l;var o=13},{}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=Backbone.Model.extend({defaults:{title:"",completed:!1},toggle:function(){this.save({completed:!this.get("completed")})}})},{}],6:[function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var o=e("./../filters/todo"),n=l(o),r=e("./../collections/todos"),s=l(r),u=Backbone.Router.extend({routes:{"*filter":"setFilter"},setFilter:function(e){console.log("Set filter: "+e),n["default"].set(e||""),s["default"].trigger("filter")}}),d=new u;Backbone.history.start(),i["default"]=d},{"./../collections/todos":2,"./../filters/todo":3}],7:[function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var o=e("./../helpers/utils"),n=e("./../filters/todo"),r=l(n),s=e("./todos"),u=l(s),d=e("./../collections/todos"),a=l(d);i["default"]=Backbone.View.extend({el:"#todoapp",statsTemplate:_.template($("#stats-template").html()),events:{"keypress #new-todo":"createOnEnter","click #clear-completed":"clearCompleted","click #toggle-all":"toggleAllComplete"},initialize:function(){this.allCheckbox=this.$("#toggle-all")[0],this.$input=this.$("#new-todo"),this.$footer=this.$("#footer"),this.$main=this.$("#main"),this.listenTo(a["default"],"add",this.addOne),this.listenTo(a["default"],"reset",this.addAll),this.listenTo(a["default"],"change:completed",this.filterOne),this.listenTo(a["default"],"filter",this.filterAll),this.listenTo(a["default"],"all",this.render),a["default"].fetch()},render:function(){var e=a["default"].completed().length,t=a["default"].remaining().length;a["default"].length?(this.$main.show(),this.$footer.show(),this.$footer.html(this.statsTemplate({completed:e,remaining:t})),console.log("view render: "+r["default"].get()),this.$("#filters li a").removeClass("selected").filter('[href="#/'+(r["default"].get()||"")+'"]').addClass("selected")):(this.$main.hide(),this.$footer.hide()),this.allCheckbox.checked=!t},addOne:function(e){var t=new u["default"]({model:e});$("#todo-list").append(t.render().el)},addAll:function(){this.$("#todo-list").html(""),a["default"].each(this.addOne,this)},filterOne:function(e){e.trigger("visible")},filterAll:function(){a["default"].each(this.filterOne,this)},newAttributes:function(){return{title:this.$input.val().trim(),order:a["default"].nextOrder(),completed:!1}},createOnEnter:function(e){(0,o.isEnterKey)(e.which)&&this.$input.val().trim()&&(a["default"].create(this.newAttributes()),this.$input.val(""))},clearCompleted:function(){return _.invoke(a["default"].completed(),"destroy"),!1},toggleAllComplete:function(){var e=this.allCheckbox.checked;a["default"].each(function(t){t.save({completed:e})})}})},{"./../collections/todos":2,"./../filters/todo":3,"./../helpers/utils":4,"./todos":8}],8:[function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var o=e("./../helpers/utils"),n=e("./../filters/todo"),r=l(n);i["default"]=Backbone.View.extend({tagName:"li",template:_.template($("#item-template").html()),events:{"click .toggle":"togglecompleted","dblclick label":"edit","click .destroy":"clear","keypress .edit":"updateOnEnter","blur .edit":"close"},initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"visible",this.toggleVisible)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.toggleClass("completed",this.model.get("completed")),this.toggleVisible(),this.$input=this.$(".edit"),this},toggleVisible:function(){this.$el.toggleClass("hidden",this.isHidden())},isHidden:function(){console.log("Is hidden: "+r["default"].get());var e=this.model.get("completed");return!e&&"completed"===r["default"].get()||e&&"active"===r["default"].get()},togglecompleted:function(){this.model.toggle()},edit:function(){this.$el.addClass("editing"),this.$input.focus()},close:function(){var e=this.$input.val().trim();e?this.model.save({title:e}):this.clear(),this.$el.removeClass("editing")},updateOnEnter:function(e){(0,o.isEnterKey)(e.which)&&this.close()},clear:function(){this.model.destroy()}})},{"./../filters/todo":3,"./../helpers/utils":4}]},{},[1]);
//# sourceMappingURL=app.js.map
